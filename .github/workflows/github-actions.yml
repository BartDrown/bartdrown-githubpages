name: Angular GitHub Pages CI
on:
    push:
        branches:
            - main

jobs:
    ci:
        runs-on: ubuntu-latest

steps:
    - uses:
        actions/checkout@v2
    - name: Use node
        - uses: actions/setup-node@v1
        with:
            node-version: 16.x
    - name: Cache node modules
        id: cache-nodemodules
        uses: actions/cache@v2
        env:
            cache-name: cache-node-modules
        with:
            path: node_modules # ðŸ‘ˆ path for node_modules folder
            key: ${{ runner.os }}-build-${{ env.cache-name }}-${{ hashFiles('**/package-lock.json') }}
            # ðŸ‘† name of the chache key includes package-lock.json
            restore-keys: |
            ${{ runner.os }}-build-${{ env.cache-name }}-
            ${{ runner.os }}-build-
            ${{ runner.os }}-
    - name: Install Dependencies
        if:
            steps.cache-nodemodules.outputs.cache-hit != 'true'
            # ðŸ‘† if cache hits the skip this step.
        run: npm ci
    - name: Build
        run: npm run build -- --prod


